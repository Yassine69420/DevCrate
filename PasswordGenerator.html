<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Generator | DevCrate</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap"
      rel="stylesheet"
    />
    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#f0f9ff",
                100: "#e0f2fe",
                200: "#bae6fd",
                300: "#7dd3fc",
                400: "#38bdf8",
                500: "#0ea5e9",
                600: "#0284c7",
                700: "#0369a1",
                800: "#075985",
                900: "#0c4a6e",
              },
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              mono: ['"Fira Code"', "monospace"],
            },
          },
        },
      };
    </script>
    <style>
      .theme-toggle {
        transition: all 0.3s ease;
      }
      .theme-toggle:hover {
        transform: rotate(15deg) scale(1.1);
      }
      .strength-bar {
        transition: all 0.5s ease;
        height: 8px;
        border-radius: 4px;
      }
      .strength-weak {
        width: 33.33%;
        background: linear-gradient(90deg, #ef4444, #dc2626);
      }
      .strength-medium {
        width: 66.66%;
        background: linear-gradient(90deg, #f59e0b, #d97706);
      }
      .strength-strong {
        width: 100%;
        background: linear-gradient(90deg, #10b981, #059669);
      }
      .password-display {
        position: relative;
        overflow: hidden;
      }
      .password-display::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(14, 165, 233, 0.2),
          transparent
        );
        transition: left 0.5s ease;
      }
      .password-display.flash::before {
        left: 100%;
      }
      .container {
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease-out;
      }
      .fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .checkbox-wrapper input[type="checkbox"] {
        cursor: pointer;
        width: 20px;
        height: 20px;
      }
      .slider-thumb::-webkit-slider-thumb {
        appearance: none;
        width: 20px;
        height: 20px;
        background: #0ea5e9;
        cursor: pointer;
        border-radius: 50%;
        box-shadow: 0 2px 8px rgba(14, 165, 233, 0.5);
      }
      .slider-thumb::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #0ea5e9;
        cursor: pointer;
        border-radius: 50%;
        border: none;
        box-shadow: 0 2px 8px rgba(14, 165, 233, 0.5);
      }
      .history-item {
        transition: all 0.3s ease;
      }
      .history-item:hover {
        transform: translateX(5px);
      }
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
    </style>
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 min-h-screen font-sans text-gray-800 dark:text-gray-200">
    <div class="container mx-auto px-4 py-8">
      <header class="flex justify-between items-center mb-8">
        <div>
          <a href="DevCrate.html" class="flex items-center">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
              Dev<span class="text-primary-600 dark:text-primary-400">Crate</span>
            </h1>
          </a>
          <p class="text-gray-600 dark:text-gray-400 mt-1">
            Secure Password Generator
          </p>
        </div>
        <button
          id="themeToggle"
          class="theme-toggle bg-gray-200 dark:bg-gray-700 rounded-full p-3 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-900"
        >
          <i id="moonIcon" class="fas fa-moon"></i>
          <i id="sunIcon" class="fas fa-sun hidden"></i>
        </button>
      </header>

      <main>
        <div class="max-w-4xl mx-auto space-y-8">
          <!-- Password Display -->
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-8">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">
              <i class="fas fa-key mr-2"></i>Generated Password
            </h2>
            
            <div class="password-display bg-gradient-to-br from-primary-50 to-primary-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-6 mb-4">
              <div class="flex items-center justify-between gap-4">
                <input
                  id="passwordDisplay"
                  type="text"
                  readonly
                  class="flex-1 bg-transparent font-mono text-2xl font-bold text-gray-900 dark:text-white outline-none select-all"
                  value="Click Generate!"
                />
                <div class="flex gap-2">
                  <button
                    id="copyBtn"
                    class="p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-all transform hover:scale-105"
                    title="Copy to clipboard"
                  >
                    <i class="fas fa-copy"></i>
                  </button>
                  <button
                    id="refreshBtn"
                    class="p-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all transform hover:scale-105"
                    title="Generate new password"
                  >
                    <i class="fas fa-sync-alt"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Strength Indicator -->
            <div class="mb-2">
              <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Password Strength:</span>
                <span id="strengthText" class="text-sm font-bold text-gray-500">Not Generated</span>
              </div>
              <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden">
                <div id="strengthBar" class="strength-bar"></div>
              </div>
            </div>
          </div>

          <!-- Options -->
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-8">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">
              <i class="fas fa-sliders-h mr-2"></i>Customization Options
            </h2>

            <!-- Length Slider -->
            <div class="mb-6">
              <div class="flex justify-between items-center mb-3">
                <label class="text-sm font-medium text-gray-700 dark:text-gray-300">
                  Password Length
                </label>
                <span id="lengthValue" class="text-2xl font-bold text-primary-600 dark:text-primary-400">16</span>
              </div>
              <input
                id="lengthSlider"
                type="range"
                min="4"
                max="64"
                value="16"
                class="slider-thumb w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"
              />
              <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                <span>4</span>
                <span>64</span>
              </div>
            </div>

            <!-- Character Options -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                <input
                  type="checkbox"
                  id="includeUppercase"
                  checked
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="includeUppercase" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Uppercase Letters</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400 font-mono">A-Z</div>
                </label>
              </div>

              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                <input
                  type="checkbox"
                  id="includeLowercase"
                  checked
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="includeLowercase" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Lowercase Letters</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400 font-mono">a-z</div>
                </label>
              </div>

              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                <input
                  type="checkbox"
                  id="includeNumbers"
                  checked
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="includeNumbers" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Numbers</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400 font-mono">0-9</div>
                </label>
              </div>

              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                <input
                  type="checkbox"
                  id="includeSymbols"
                  checked
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="includeSymbols" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Special Characters</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400 font-mono">!@#$%^&*</div>
                </label>
              </div>
            </div>

            <!-- Advanced Options -->
            <div class="mt-6 space-y-3">
              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-800 rounded-lg">
                <input
                  type="checkbox"
                  id="excludeSimilar"
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="excludeSimilar" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Exclude Similar Characters</div>
                  <div class="text-xs text-gray-600 dark:text-gray-300">Excludes: i, l, 1, L, o, 0, O</div>
                </label>
              </div>

              <div class="checkbox-wrapper flex items-center space-x-3 p-4 bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-700 dark:to-gray-800 rounded-lg">
                <input
                  type="checkbox"
                  id="excludeAmbiguous"
                  class="rounded text-primary-600 focus:ring-primary-500"
                />
                <label for="excludeAmbiguous" class="flex-1 cursor-pointer">
                  <div class="font-medium text-gray-900 dark:text-white">Exclude Ambiguous Characters</div>
                  <div class="text-xs text-gray-600 dark:text-gray-300">Excludes: { } [ ] ( ) / \ ' " ` ~ , ; : . < ></div>
                </label>
              </div>
            </div>

            <!-- Generate Button -->
            <div class="mt-8 text-center">
              <button
                id="generateBtn"
                class="px-10 py-4 bg-primary-600 hover:bg-primary-700 text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105"
              >
                <i class="fas fa-magic mr-2"></i>Generate Password
              </button>
            </div>
          </div>

          <!-- Password History -->
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-8">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
                <i class="fas fa-history mr-2"></i>Recent Passwords
              </h2>
              <button
                id="clearHistory"
                class="text-red-500 hover:text-red-700 text-sm font-medium transition-colors"
              >
                <i class="fas fa-trash-alt mr-1"></i>Clear All
              </button>
            </div>

            <div id="historyContainer" class="space-y-2">
              <p class="text-center text-gray-500 dark:text-gray-400 py-8">
                No passwords generated yet
              </p>
            </div>
          </div>

          <!-- Security Tips -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-6">
              <div class="text-3xl text-blue-600 dark:text-blue-400 mb-3">
                <i class="fas fa-shield-alt"></i>
              </div>
              <h3 class="font-bold text-lg mb-2 text-gray-900 dark:text-white">Strong & Secure</h3>
              <p class="text-sm text-gray-700 dark:text-gray-300">
                Use passwords with at least 12 characters mixing uppercase, lowercase, numbers, and symbols
              </p>
            </div>

            <div class="bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-6">
              <div class="text-3xl text-green-600 dark:text-green-400 mb-3">
                <i class="fas fa-lock"></i>
              </div>
              <h3 class="font-bold text-lg mb-2 text-gray-900 dark:text-white">Unique Passwords</h3>
              <p class="text-sm text-gray-700 dark:text-gray-300">
                Never reuse passwords across different accounts. Use a password manager to keep track
              </p>
            </div>

            <div class="bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-6">
              <div class="text-3xl text-purple-600 dark:text-purple-400 mb-3">
                <i class="fas fa-user-shield"></i>
              </div>
              <h3 class="font-bold text-lg mb-2 text-gray-900 dark:text-white">Enable 2FA</h3>
              <p class="text-sm text-gray-700 dark:text-gray-300">
                Add an extra layer of security with two-factor authentication whenever possible
              </p>
            </div>
          </div>
        </div>
      </main>

      <footer class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700 text-center text-gray-600 dark:text-gray-400">
        <p>Â© 2025 DevCrate. Generate strong, secure passwords instantly.</p>
      </footer>
    </div>

    <script>
      // Theme management
      const themeToggle = document.getElementById("themeToggle");
      const moonIcon = document.getElementById("moonIcon");
      const sunIcon = document.getElementById("sunIcon");
      const html = document.documentElement;

      const savedTheme = localStorage.getItem("theme") || "light";
      if (savedTheme === "dark") {
        html.classList.add("dark");
        moonIcon.classList.add("hidden");
        sunIcon.classList.remove("hidden");
      }

      themeToggle.addEventListener("click", () => {
        html.classList.toggle("dark");
        const isDark = html.classList.contains("dark");
        moonIcon.classList.toggle("hidden", isDark);
        sunIcon.classList.toggle("hidden", !isDark);
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });

      // Password generation elements
      const passwordDisplay = document.getElementById("passwordDisplay");
      const lengthSlider = document.getElementById("lengthSlider");
      const lengthValue = document.getElementById("lengthValue");
      const generateBtn = document.getElementById("generateBtn");
      const refreshBtn = document.getElementById("refreshBtn");
      const copyBtn = document.getElementById("copyBtn");
      const strengthBar = document.getElementById("strengthBar");
      const strengthText = document.getElementById("strengthText");
      const historyContainer = document.getElementById("historyContainer");
      const clearHistory = document.getElementById("clearHistory");

      // Checkboxes
      const includeUppercase = document.getElementById("includeUppercase");
      const includeLowercase = document.getElementById("includeLowercase");
      const includeNumbers = document.getElementById("includeNumbers");
      const includeSymbols = document.getElementById("includeSymbols");
      const excludeSimilar = document.getElementById("excludeSimilar");
      const excludeAmbiguous = document.getElementById("excludeAmbiguous");

      // Character sets
      const uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      const lowercase = "abcdefghijklmnopqrstuvwxyz";
      const numbers = "0123456789";
      const symbols = "!@#$%^&*()_+-=[]{}|;:,.<>?";
      const similarChars = "il1Lo0O";
      const ambiguousChars = "{}[]()/\\'\"`;:.,<>";

      let passwordHistory = JSON.parse(localStorage.getItem("passwordHistory")) || [];

      // Length slider
      lengthSlider.addEventListener("input", (e) => {
        lengthValue.textContent = e.target.value;
      });

      // Generate password function
      function generatePassword() {
        const length = parseInt(lengthSlider.value);
        let charset = "";
        let password = "";

        // Build character set
        if (includeUppercase.checked) charset += uppercase;
        if (includeLowercase.checked) charset += lowercase;
        if (includeNumbers.checked) charset += numbers;
        if (includeSymbols.checked) charset += symbols;

        // Remove excluded characters
        if (excludeSimilar.checked) {
          charset = charset.split("").filter(char => !similarChars.includes(char)).join("");
        }
        if (excludeAmbiguous.checked) {
          charset = charset.split("").filter(char => !ambiguousChars.includes(char)).join("");
        }

        if (charset.length === 0) {
          showToast("Please select at least one character type", "error");
          return;
        }

        // Generate password using crypto for better randomness
        const array = new Uint32Array(length);
        crypto.getRandomValues(array);
        
        for (let i = 0; i < length; i++) {
          password += charset[array[i] % charset.length];
        }

        // Ensure at least one character from each selected type
        let ensuredPassword = password;
        if (includeUppercase.checked && !ensuredPassword.match(/[A-Z]/)) {
          ensuredPassword = replaceRandomChar(ensuredPassword, uppercase);
        }
        if (includeLowercase.checked && !ensuredPassword.match(/[a-z]/)) {
          ensuredPassword = replaceRandomChar(ensuredPassword, lowercase);
        }
        if (includeNumbers.checked && !ensuredPassword.match(/[0-9]/)) {
          ensuredPassword = replaceRandomChar(ensuredPassword, numbers);
        }
        if (includeSymbols.checked && !ensuredPassword.match(/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/)) {
          ensuredPassword = replaceRandomChar(ensuredPassword, symbols);
        }

        displayPassword(ensuredPassword);
        calculateStrength(ensuredPassword);
        addToHistory(ensuredPassword);
        
        // Flash animation
        const displayEl = document.querySelector(".password-display");
        displayEl.classList.add("flash");
        setTimeout(() => displayEl.classList.remove("flash"), 500);
      }

      function replaceRandomChar(str, charset) {
        const pos = Math.floor(Math.random() * str.length);
        const newChar = charset[Math.floor(Math.random() * charset.length)];
        return str.substring(0, pos) + newChar + str.substring(pos + 1);
      }

      function displayPassword(password) {
        passwordDisplay.value = password;
      }

      function calculateStrength(password) {
        let strength = 0;
        
        // Length bonus
        if (password.length >= 8) strength += 20;
        if (password.length >= 12) strength += 20;
        if (password.length >= 16) strength += 20;
        
        // Character variety
        if (/[a-z]/.test(password)) strength += 10;
        if (/[A-Z]/.test(password)) strength += 10;
        if (/[0-9]/.test(password)) strength += 10;
        if (/[^a-zA-Z0-9]/.test(password)) strength += 10;

        // Update UI
        strengthBar.className = "strength-bar";
        
        if (strength < 40) {
          strengthBar.classList.add("strength-weak");
          strengthText.textContent = "Weak";
          strengthText.className = "text-sm font-bold text-red-600";
        } else if (strength < 70) {
          strengthBar.classList.add("strength-medium");
          strengthText.textContent = "Medium";
          strengthText.className = "text-sm font-bold text-yellow-600";
        } else {
          strengthBar.classList.add("strength-strong");
          strengthText.textContent = "Strong";
          strengthText.className = "text-sm font-bold text-green-600";
        }
      }

      function addToHistory(password) {
        const timestamp = new Date().toLocaleString();
        passwordHistory.unshift({ password, timestamp });
        
        // Keep only last 10
        if (passwordHistory.length > 10) {
          passwordHistory = passwordHistory.slice(0, 10);
        }
        
        localStorage.setItem("passwordHistory", JSON.stringify(passwordHistory));
        renderHistory();
      }

      function renderHistory() {
        if (passwordHistory.length === 0) {
          historyContainer.innerHTML = `
            <p class="text-center text-gray-500 dark:text-gray-400 py-8">
              No passwords generated yet
            </p>
          `;
          return;
        }

        historyContainer.innerHTML = passwordHistory.map((item, index) => `
          <div class="history-item flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg group">
            <div class="flex-1 mr-4">
              <p class="font-mono font-semibold text-gray-900 dark:text-white">${item.password}</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${item.timestamp}</p>
            </div>
            <button
              onclick="copyFromHistory('${item.password}')"
              class="p-2 text-gray-500 hover:text-primary-600 dark:hover:text-primary-400 transition-colors opacity-0 group-hover:opacity-100"
              title="Copy password"
            >
              <i class="fas fa-copy"></i>
            </button>
          </div>
        `).join("");
      }

      window.copyFromHistory = function(password) {
        copyToClipboard(password);
      };

      // Event listeners
      generateBtn.addEventListener("click", generatePassword);
      refreshBtn.addEventListener("click", generatePassword);

      copyBtn.addEventListener("click", () => {
        const password = passwordDisplay.value;
        if (password === "Click Generate!") {
          showToast("Generate a password first!", "error");
          return;
        }
        copyToClipboard(password);
      });

      clearHistory.addEventListener("click", () => {
        if (confirm("Are you sure you want to clear all password history?")) {
          passwordHistory = [];
          localStorage.removeItem("passwordHistory");
          renderHistory();
          showToast("History cleared", "success");
        }
      });

      // Copy to clipboard
      function copyToClipboard(text) {
        if (!navigator.clipboard) {
          const textarea = document.createElement("textarea");
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          try {
            document.execCommand("copy");
            showToast("Password copied!", "success");
          } catch (err) {
            showToast("Copy failed", "error");
          }
          textarea.remove();
          return;
        }

        navigator.clipboard.writeText(text)
          .then(() => {
            showToast("Password copied!", "success");
            
            // Visual feedback on copy button
            const originalHTML = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fas fa-check"></i>';
            setTimeout(() => {
              copyBtn.innerHTML = originalHTML;
            }, 1000);
          })
          .catch(() => showToast("Copy failed", "error"));
      }

      function showToast(msg, type = "success") {
        const bgColor = type === "success" ? "bg-green-500" : "bg-red-500";
        const icon = type === "success" ? "check-circle" : "exclamation-circle";
        const toast = document.createElement("div");
        toast.className = `fixed bottom-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in`;
        toast.innerHTML = `<i class="fas fa-${icon} mr-2"></i>${msg}`;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
      }

      // Initialize
      renderHistory();

      // Initial animation
      setTimeout(() => {
        document.querySelector(".container").style.opacity = "1";
        document.querySelector(".container").style.transform = "translateY(0)";
      }, 100);

      // Auto-generate on first load
      setTimeout(() => {
        generatePassword();
      }, 500);
    </script>
  </body>
</html>